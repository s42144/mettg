<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gemini Generated Image — Viewer</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#6ee7b7;
      --muted:#9aa8b2;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071226 0%, #071726 60%, #071621 100%);
      color:#e6eef3;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      width:100%;
      max-width:1060px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      padding:20px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.7);
      border: 1px solid rgba(255,255,255,0.03);
    }

    header {
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:12px;
    }
    .logo {
      width:48px;height:48px;border-radius:10px;
      background:linear-gradient(135deg,var(--accent),#64b5f6);
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:#042;box-shadow:0 6px 18px rgba(100,180,246,0.09);
    }
    h1{
      font-size:18px;margin:0;
      letter-spacing:0.2px;
    }
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .viewer{
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:18px;
      align-items:start;
    }

    /* image card */
    .image-card{
      background:var(--card);
      border-radius:12px;
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
      justify-content:center;
      min-height:360px;
      position:relative;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.02);
    }

    .img-wrap{
      width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      border-radius:10px;
      background:var(--glass);
      padding:10px;
    }

    img#mainImage{
      max-width:100%;
      max-height:60vh;
      height:auto;
      display:block;
      transition: transform 220ms ease;
      cursor:zoom-in;
      border-radius:8px;
      user-select:none;
    }

    .controls{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      width:100%;
      justify-content:space-between;
      align-items:center;
    }

    .left-controls{display:flex; gap:8px; align-items:center;}
    .btn{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      color:var(--accent);
      border:1px solid rgba(110,231,183,0.12);
      padding:8px 12px;
      border-radius:10px;
      text-decoration:none;
      font-weight:600;
      font-size:13px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      cursor:pointer;
    }
    .btn.secondary{
      color:var(--muted);
      border:1px dashed rgba(255,255,255,0.03);
      background:transparent;
    }

    .meta{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      padding:12px;
      border-radius:10px;
      color:var(--muted);
      font-size:13px;
      line-height:1.45;
      border:1px solid rgba(255,255,255,0.02);
    }

    aside.side-panel{
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .panel-card{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);
    }

    .badge{
      display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);font-weight:700;color:var(--accent);font-size:12px;
    }

    /* spinner */
    .spinner{
      width:56px;height:56px;border-radius:50%;
      border:6px solid rgba(255,255,255,0.06);
      border-top-color:var(--accent);
      animation:spin 1s linear infinite;
      display:inline-block;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* fullscreen overlay */
    .overlay{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(2,6,23,0.9), rgba(2,6,23,0.95));
      z-index:1200;padding:18px;
    }
    .overlay.show{display:flex}
    .overlay img{max-width:98%;max-height:98%;box-shadow:0 30px 100px rgba(2,6,23,0.8);border-radius:10px}

    footer{margin-top:14px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;gap:12px;align-items:center}

    @media (max-width:920px){
      .viewer{grid-template-columns:1fr;overflow:hidden}
      aside.side-panel{order:2}
    }
  </style>
</head>
<body>
  <div class="wrap" role="main" aria-labelledby="title">
    <header>
      <div class="logo">GG</div>
      <div>
        <h1 id="title">Gemini Generated Image — Viewer</h1>
        <p class="lead">Image loaded from the repository. Use the controls to download, open or view fullscreen.</p>
      </div>
    </header>

    <div class="viewer">
      <div class="image-card" id="imageCard">
        <div class="img-wrap" id="imgWrap">
          <!-- spinner shown while loading -->
          <div id="loading" style="display:flex;align-items:center;justify-content:center;height:220px;width:100%;">
            <div style="text-align:center">
              <div class="spinner" aria-hidden="true"></div>
              <div style="margin-top:8px;color:var(--muted);font-size:13px">Loading image…</div>
            </div>
          </div>

          <!-- image element -->
          <img id="mainImage" alt="Gemini generated artwork" style="display:none" draggable="false" />
        </div>

        <div class="controls">
          <div class="left-controls">
            <button class="btn" id="openBtn" title="Open raw image in new tab">Open Image</button>
            <button class="btn" id="downloadBtn" title="Download image">Download</button>
            <button class="btn secondary" id="copyLinkBtn" title="Copy raw image URL to clipboard">Copy Link</button>
          </div>
          <div style="text-align:right">
            <span class="badge" id="sizeBadge">—</span>
          </div>
        </div>

        <div class="meta" id="caption">
          <strong>Filename:</strong> <span id="filename">Gemini_Generated_Image_hlgigfhlgigfhlgi.png</span><br>
          <strong>Source:</strong> <a href="https://github.com/s42144/mettg/blob/a1b937ae0360b98de950d8cb2e6db3e8db6b6787/Gemini_Generated_Image_hlgigfhlgigfhlgi.png" target="_blank" rel="noopener" style="color:inherit;text-decoration:underline">GitHub repository (blob)</a><br>
          <small style="color:var(--muted)">If the image fails to load, open the GitHub link above to confirm file existence or permissions.</small>
        </div>
      </div>

      <aside class="side-panel" aria-label="Image info">
        <div class="panel-card">
          <strong>Quick info</strong>
          <div style="height:8px"></div>
          <div style="display:flex;justify-content:space-between">
            <div><small style="color:var(--muted)">Displayed from</small><br><strong id="host">raw.githubusercontent.com</strong></div>
            <div style="text-align:right"><small style="color:var(--muted)">Status</small><br><span id="status">Loading…</span></div>
          </div>
        </div>

        <div class="panel-card">
          <strong>Actions</strong>
          <div style="height:10px"></div>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button class="btn" id="fullscreenBtn">View Fullscreen</button>
            <a class="btn secondary" href="https://github.com/s42144/mettg" target="_blank" rel="noopener">Open Repo</a>
          </div>
        </div>

        <div class="panel-card">
          <strong>Notes</strong>
          <p style="margin:8px 0 0 0;color:var(--muted);font-size:13px">
            This page references the raw image file hosted on GitHub. If you want to embed it in other pages, use the raw URL:
            <div style="margin-top:8px;padding:10px;background:rgba(255,255,255,0.02);border-radius:8px;word-break:break-all;font-size:13px">
              <code id="rawUrl" style="color:var(--accent);">https://raw.githubusercontent.com/s42144/mettg/a1b937ae0360b98de950d8cb2e6db3e8db6b6787/Gemini_Generated_Image_hlgigfhlgigfhlgi.png</code>
            </div>
          </p>
        </div>
      </aside>
    </div>

    <footer>
      <div>Built for quick preview • <span style="color:var(--muted)">Single file</span></div>
      <div style="color:var(--muted)">Tip: click the image to zoom or use the Fullscreen button</div>
    </footer>
  </div>

  <!-- fullscreen overlay -->
  <div id="overlay" class="overlay" aria-hidden="true" role="dialog" aria-label="Image fullscreen viewer">
    <img id="overlayImg" alt="Fullscreen image"/>
  </div>

  <script>
    (function(){
      // raw image URL based on the GitHub blob path provided by the user
      const rawUrl = "https://raw.githubusercontent.com/s42144/mettg/a1b937ae0360b98de950d8cb2e6db3e8db6b6787/Gemini_Generated_Image_hlgigfhlgigfhlgi.png";
      const githubBlobUrl = "https://github.com/s42144/mettg/blob/a1b937ae0360b98de950d8cb2e6db3e8db6b6787/Gemini_Generated_Image_hlgigfhlgigfhlgi.png";

      const mainImage = document.getElementById('mainImage');
      const loadingElem = document.getElementById('loading');
      const sizeBadge = document.getElementById('sizeBadge');
      const statusElem = document.getElementById('status');
      const filenameElem = document.getElementById('filename');
      const rawUrlElem = document.getElementById('rawUrl');

      // set initial values
      mainImage.src = rawUrl;
      mainImage.alt = filenameElem.textContent;
      rawUrlElem.textContent = rawUrl;

      // helper: format bytes
      function formatBytes(bytes){
        if(!bytes) return '—';
        const units = ['B','KB','MB','GB','TB'];
        let i = 0;
        while(bytes >= 1024 && i < units.length-1){
          bytes /= 1024; i++;
        }
        return `${Math.round(bytes*10)/10} ${units[i]}`;
      }

      // load image and detect size via HEAD request (best-effort; may be blocked by CORS)
      function probeSize(){
        // try to fetch the image as a blob to get size (works in most browsers if not blocked)
        fetch(rawUrl, { method: 'GET' })
          .then(resp => {
            if(!resp.ok) throw new Error('Network response not ok');
            const len = resp.headers.get('Content-Length');
            if(len) {
              sizeBadge.textContent = formatBytes(Number(len));
            } else {
              // fallback: read blob size
              return resp.blob().then(blob=>{
                sizeBadge.textContent = formatBytes(blob.size);
              });
            }
          })
          .catch(err=>{
            // silently show unknown
            sizeBadge.textContent = 'Unknown size';
          });
      }

      // main image load handling
      mainImage.addEventListener('load', ()=>{
        loadingElem.style.display = 'none';
        mainImage.style.display = 'block';
        statusElem.textContent = 'Loaded';
        statusElem.style.color = 'var(--accent)';
        probeSize();
      });

      mainImage.addEventListener('error', ()=>{
        loadingElem.innerHTML = '<div style="text-align:center;color:var(--muted)"><div style="font-size:22px">⚠️</div><div style="margin-top:8px">Failed to load image from the raw URL.</div><div style="margin-top:10px"><a href="'+githubBlobUrl+'" target="_blank" rel="noopener" class="btn secondary">Open GitHub blob</a></div></div>';
        statusElem.textContent = 'Failed';
        statusElem.style.color = '#ff6b6b';
      });

      // interactive controls
      document.getElementById('openBtn').addEventListener('click', ()=>{
        window.open(rawUrl, '_blank', 'noopener');
      });

      document.getElementById('downloadBtn').addEventListener('click', ()=>{
        // Attempt to download via anchor with download attribute
        const a = document.createElement('a');
        a.href = rawUrl;
        a.download = filenameElem.textContent || 'image.png';
        document.body.appendChild(a);
        a.click();
        a.remove();
      });

      document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
        try {
          await navigator.clipboard.writeText(rawUrl);
          const old = document.getElementById('copyLinkBtn').textContent;
          document.getElementById('copyLinkBtn').textContent = "Copied!";
          setTimeout(()=> document.getElementById('copyLinkBtn').textContent = old, 1500);
        } catch(e){
          alert('Copy failed — please copy manually: ' + rawUrl);
        }
      });

      // fullscreen / overlay
      const overlay = document.getElementById('overlay');
      const overlayImg = document.getElementById('overlayImg');
      function openOverlay(){
        overlayImg.src = rawUrl;
        overlay.classList.add('show');
        overlay.setAttribute('aria-hidden','false');
      }
      function closeOverlay(){
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden','true');
        overlayImg.src = '';
      }
      document.getElementById('fullscreenBtn').addEventListener('click', openOverlay);
      overlay.addEventListener('click', closeOverlay);
      overlay.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeOverlay(); });

      // image zoom: click to toggle zoom/fullscreen
      let zoomed = false;
      mainImage.addEventListener('click', (e)=>{
        // simple zoom: scale image inside container
        if(!zoomed){
          mainImage.style.transform = 'scale(1.08)';
          mainImage.style.cursor = 'zoom-out';
          zoomed = true;
        } else {
          mainImage.style.transform = 'scale(1)';
          mainImage.style.cursor = 'zoom-in';
          zoomed = false;
        }
      });

      // keyboard accessibility
      document.addEventListener('keyup', (e)=>{
        if(e.key === 'f') openOverlay();
        if(e.key === 'Escape') {
          closeOverlay();
          if(zoomed){ mainImage.style.transform='scale(1)'; zoomed=false; mainImage.style.cursor='zoom-in'; }
        }
      });

      // start: try to load image by setting src (already set above)
      // If browser cached it, load event may already have fired; safe to check:
      if(mainImage.complete && mainImage.naturalWidth !== 0){
        loadingElem.style.display = 'none';
        mainImage.style.display = 'block';
        statusElem.textContent = 'Loaded';
        statusElem.style.color = 'var(--accent)';
        probeSize();
      }
    })();
  </script>
</body>
</html>
